{% extends 'base.html' %}
{% load static %}

{% block title %} | Request Submitted{% endblock %}

{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
    body { font-family: 'Plus Jakarta Sans', sans-serif; }
    .success-wrapper {
        min-height: 100vh; display: flex; align-items: center; justify-content: center;
        padding: 40px 20px; background: #f0f4ff; position: relative; overflow: hidden;
    }
    .bg-orb {
        position: fixed; border-radius: 50%; filter: blur(80px); opacity: 0.22;
        z-index: 0; animation: orbFloat 7s ease-in-out infinite alternate;
    }
    .orb-1 { width: 500px; height: 500px; background: #6366f1; top: -120px; right: -100px; animation-delay: 0s; }
    .orb-2 { width: 360px; height: 360px; background: #a855f7; bottom: -80px; left: -60px; animation-delay: 2s; }
    .orb-3 { width: 240px; height: 240px; background: #10b981; bottom: 100px; right: 100px; animation-delay: 4s; }
    @keyframes orbFloat { from { transform: translateY(0) scale(1); } to { transform: translateY(30px) scale(1.06); } }

    .success-card {
        position: relative; z-index: 1;
        background: rgba(255,255,255,0.88); backdrop-filter: blur(20px);
        border: 1px solid rgba(255,255,255,0.6); border-radius: 32px; padding: 52px 48px;
        max-width: 620px; width: 100%; text-align: center;
        box-shadow: 0 30px 60px -10px rgba(99,102,241,0.18), 0 2px 8px rgba(0,0,0,0.06), inset 0 1px 0 rgba(255,255,255,0.9);
        animation: cardIn 0.7s cubic-bezier(0.22,1,0.36,1) both;
    }
    @keyframes cardIn { from { opacity:0; transform:translateY(40px) scale(0.96); } to { opacity:1; transform:translateY(0) scale(1); } }

    .icon-ring {
        width: 100px; height: 100px; margin: 0 auto 28px; border-radius: 50%;
        background: linear-gradient(135deg, #6366f1, #a855f7);
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 0 0 14px rgba(99,102,241,0.12), 0 0 0 28px rgba(99,102,241,0.06), 0 10px 28px rgba(99,102,241,0.35);
        animation: ringPop 0.65s cubic-bezier(0.34,1.56,0.64,1) 0.25s both;
    }
    @keyframes ringPop { from { transform:scale(0); opacity:0; } to { transform:scale(1); opacity:1; } }
    .icon-ring i { font-size: 2.8rem; color: #fff; animation: iconIn 0.4s ease 0.75s both; }
    @keyframes iconIn { from { opacity:0; transform:scale(0.4) rotate(-20deg); } to { opacity:1; transform:scale(1) rotate(0); } }

    .status-label {
        display: inline-block; font-size: 0.72rem; font-weight: 700; letter-spacing: 2.5px;
        text-transform: uppercase; color: #6366f1; background: rgba(99,102,241,0.1);
        border: 1px solid rgba(99,102,241,0.2); border-radius: 999px; padding: 5px 16px;
        margin-bottom: 14px; animation: fadeUp 0.5s ease 0.5s both;
    }
    h2.main-title { font-size: 2.2rem; font-weight: 900; color: #1e293b; line-height: 1.2; margin-bottom: 10px; animation: fadeUp 0.5s ease 0.6s both; }
    p.sub-text { color: #64748b; font-size: 1rem; line-height: 1.6; margin-bottom: 0; animation: fadeUp 0.5s ease 0.65s both; }
    @keyframes fadeUp { from { opacity:0; transform:translateY(14px); } to { opacity:1; transform:translateY(0); } }

    hr.divider { border: none; height: 1px; background: linear-gradient(to right, transparent, rgba(99,102,241,0.2), transparent); margin: 28px 0; animation: fadeUp 0.5s ease 0.7s both; }

    .booking-summary { background: #f8fafc; border-radius: 20px; padding: 24px 28px; text-align: left; border: 1px solid #e2e8f0; animation: fadeUp 0.5s ease 0.75s both; }
    .summary-item { display: flex; justify-content: space-between; align-items: flex-start; padding: 9px 0; border-bottom: 1px solid #f1f5f9; gap: 12px; }
    .summary-item:last-child { border-bottom: none; }
    .summary-label { color: #94a3b8; font-weight: 600; font-size: 0.82rem; text-transform: uppercase; letter-spacing: 0.4px; white-space: nowrap; }
    .summary-value { color: #1e293b; font-weight: 700; font-size: 0.9rem; text-align: right; }

    .info-row { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin: 22px 0; animation: fadeUp 0.5s ease 0.82s both; }
    .info-pill { display: flex; align-items: center; gap: 6px; background: rgba(99,102,241,0.07); border: 1px solid rgba(99,102,241,0.15); border-radius: 999px; padding: 6px 14px; font-size: 0.8rem; font-weight: 600; color: #4f46e5; }

    .btn-row { display: flex; gap: 12px; margin-top: 28px; animation: fadeUp 0.5s ease 0.88s both; }
    .btn-primary-action { flex:2; display:inline-flex; align-items:center; justify-content:center; gap:8px; background:linear-gradient(135deg,#6366f1,#9333ea); color:#fff; border:none; border-radius:16px; padding:16px 28px; font-weight:800; font-size:0.92rem; text-decoration:none; box-shadow:0 8px 20px rgba(99,102,241,0.3); transition:all 0.25s cubic-bezier(0.34,1.56,0.64,1); cursor:pointer; font-family:inherit; }
    .btn-primary-action:hover { transform:translateY(-3px) scale(1.02); box-shadow:0 14px 28px rgba(99,102,241,0.4); color:#fff; }
    .btn-secondary-action { flex:1; display:inline-flex; align-items:center; justify-content:center; gap:8px; background:#f1f5f9; color:#475569; border:1px solid #e2e8f0; border-radius:16px; padding:16px 20px; font-weight:700; font-size:0.88rem; text-decoration:none; transition:all 0.2s ease; }
    .btn-secondary-action:hover { background:#e2e8f0; color:#1e293b; transform:translateY(-2px); }

    .confetti-container { position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
    .confetti-piece { position:absolute; opacity:0; animation:confettiFall linear both; }
    @keyframes confettiFall { 0% { opacity:1; transform:translateY(-20px) rotate(0deg); } 100% { opacity:0; transform:translateY(100vh) rotate(720deg); } }
</style>

<div class="confetti-container" id="confettiContainer"></div>
<div class="bg-orb orb-1"></div>
<div class="bg-orb orb-2"></div>
<div class="bg-orb orb-3"></div>

<div class="success-wrapper">
    <div class="success-card">
        <div class="icon-ring">
            <i class="bi bi-hourglass-split"></i>
        </div>

        <div class="status-label">Pending Admin Review</div>

        <h2 class="main-title">Request Submitted!</h2>
        <p class="sub-text">
            Your venue booking request has been forwarded to the admin for approval.
            You'll be notified once a decision is made.
        </p>

        <hr class="divider">

        <div class="booking-summary">
            <div class="summary-item">
                <span class="summary-label">Venue Requested</span>
                <span class="summary-value" style="color:#6366f1;">{{ booking.room.room_name }}</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Faculty</span>
                <span class="summary-value">{{ booking.faculty_name }}</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Email</span>
                <span class="summary-value">{{ booking.faculty_email }}</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">From</span>
                <span class="summary-value">{{ booking.start_datetime|date:"M d, Y  |  H:i" }}</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">To</span>
                <span class="summary-value">{{ booking.end_datetime|date:"M d, Y  |  H:i" }}</span>
            </div>
            {% if booking.purpose %}
            <div class="summary-item">
                <span class="summary-label">Purpose</span>
                <span class="summary-value" style="max-width:60%;">{{ booking.purpose }}</span>
            </div>
            {% endif %}
            <div class="summary-item">
                <span class="summary-label">Status</span>
                <span class="summary-value"><span style="background:#fef9c3;color:#92400e;border-radius:999px;padding:3px 12px;font-size:0.8rem;"><i class="bi bi-clock me-1"></i>Awaiting Approval</span></span>
            </div>
        </div>

        <div class="info-row">
            <span class="info-pill"><i class="bi bi-clock-history"></i> Awaiting Approval</span>
            <span class="info-pill"><i class="bi bi-shield-check"></i> Request Logged</span>
        </div>

        <div class="btn-row">
            <a href="{% url 'core:room_booking' %}" class="btn-primary-action">
                <i class="bi bi-calendar-plus"></i> Book Another Space
            </a>
            <a href="{% url 'landing_page' %}" class="btn-secondary-action">
                <i class="bi bi-house-door"></i> Home
            </a>
        </div>

    </div>
</div>

<script>
(function () {
    var colors = ['#6366f1','#a855f7','#10b981','#f59e0b','#c7d2fe','#ddd6fe'];
    var container = document.getElementById('confettiContainer');
    for (var i = 0; i < 55; i++) {
        var p = document.createElement('div');
        p.className = 'confetti-piece';
        var size = 6 + Math.random() * 9;
        p.style.cssText = 'left:' + (Math.random()*100) + '%;top:-20px;width:' + size + 'px;height:' + size + 'px;background:' + colors[Math.floor(Math.random()*colors.length)] + ';border-radius:' + (Math.random() > 0.5 ? '50%' : '3px') + ';animation-duration:' + (2.5+Math.random()*2.5) + 's;animation-delay:' + (Math.random()*1.2) + 's;';
        container.appendChild(p);
    }
    setTimeout(function() { if (container.parentNode) container.remove(); }, 5500);
})();
</script>
{% endblock %}