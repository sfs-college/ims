<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&display=swap');

  :root {
    --sb-bg: #0d0f14;
    --sb-w: 240px;
    --accent: #6c63ff;
    --accent-lt: #a89dff;
    --accent-glow: rgba(108,99,255,0.14);
    --text-dim: rgba(255,255,255,0.4);
    --text-hover: rgba(255,255,255,0.88);
    --border: rgba(255,255,255,0.06);
  }

  .sidebar {
    width: var(--sb-w);
    height: 100vh;
    background: var(--sb-bg);
    display: flex;
    flex-direction: column;
    padding: 14px 0 10px;
    position: relative;
    font-family: 'DM Sans', sans-serif;
    border-right: 1px solid var(--border);
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: none;
    flex-shrink: 0;
  }
  .sidebar::-webkit-scrollbar { display: none; }

  .sidebar::after {
    content: '';
    position: absolute;
    top: -50px; right: -60px;
    width: 160px; height: 160px;
    background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
    pointer-events: none;
  }

  .sidebar .nav {
    display: flex;
    flex-direction: column;
    gap: 1px;
    padding: 0 9px;
    position: relative;
    z-index: 1;
  }

  .sidebar .navlink {
    display: flex;
    align-items: center;
    gap: 9px;
    padding: 9px 11px;
    border-radius: 8px;
    text-decoration: none;
    color: var(--text-dim);
    font-size: 13px;
    font-weight: 500;
    transition: all 0.16s ease;
    position: relative;
    border: 1px solid transparent;
    min-width: 0;
  }

  .sidebar .navlink .material-symbols-outlined {
    font-size: 18px;
    flex-shrink: 0;
    transition: color 0.16s, transform 0.16s;
    margin: 0 !important;
  }

  .sidebar .menu-text {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
    min-width: 0;
  }

  .sidebar .navlink:hover {
    background: rgba(255,255,255,0.05);
    color: var(--text-hover);
  }
  .sidebar .navlink:hover .material-symbols-outlined {
    transform: scale(1.08);
    color: var(--accent-lt);
  }

  .sidebar .navlink.active {
    background: linear-gradient(135deg, rgba(108,99,255,0.2), rgba(108,99,255,0.07));
    color: #fff;
    border-color: rgba(108,99,255,0.22);
  }
  .sidebar .navlink.active .material-symbols-outlined { color: var(--accent-lt); }
  .sidebar .navlink.active::before {
    content: '';
    position: absolute;
    left: 0; top: 18%; bottom: 18%;
    width: 2.5px;
    background: linear-gradient(180deg, var(--accent), var(--accent-lt));
    border-radius: 0 3px 3px 0;
  }

  .sidebar .nav-divider {
    height: 1px;
    background: var(--border);
    margin: 4px 2px;
  }

  .sidebar-toggle {
    display: none;
    position: fixed;
    top: 14px; left: 14px;
    z-index: 1000;
    background: var(--sb-bg);
    border: 1px solid rgba(108,99,255,0.35);
    border-radius: 8px;
    padding: 7px;
    cursor: pointer;
    color: var(--accent-lt);
    align-items: center;
    justify-content: center;
  }
  .sidebar-overlay {
    display: none;
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(2px);
    z-index: 998;
  }
  .sidebar-overlay.open { display: block; }

  @media (max-width: 768px) {
    .sidebar-toggle { display: flex; }
    .sidebar {
      position: fixed; left: 0; top: 0; bottom: 0;
      z-index: 999;
      transform: translateX(-100%);
      transition: transform 0.28s cubic-bezier(0.4,0,0.2,1);
      box-shadow: 4px 0 28px rgba(0,0,0,0.5);
      height: 100%;
    }
    .sidebar.open { transform: translateX(0); }
  }
</style>

<button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
  <span class="material-symbols-outlined" style="font-size:19px">menu</span>
</button>
<div class="sidebar-overlay" id="sidebarOverlay"></div>

<section class="sidebar" id="mainSidebar">
  <div class="nav">

    <a class="navlink {% if request.resolver_match.url_name == 'room_dashboard' %}active{% endif %}"
       href="{% url 'room_incharge:room_dashboard' room_slug=room_slug %}">
      <span class="material-symbols-outlined">dashboard</span>
      <span class="menu-text">Dashboard</span>
    </a>

    <div class="nav-divider"></div>

    {% if room_settings.items_tab %}
    <a class="navlink {% if request.resolver_match.url_name == 'item_list' %}active{% endif %}"
       href="{% url 'room_incharge:item_list' room_slug=room_slug %}">
      <span class="material-symbols-outlined">list_alt</span>
      <span class="menu-text">Items</span>
    </a>
    {% endif %}

    {% if room_settings.item_groups_tab %}
    <a class="navlink {% if request.resolver_match.url_name == 'item_group_list' %}active{% endif %}"
       href="{% url 'room_incharge:item_group_list' room_slug=room_slug %}">
      <span class="material-symbols-outlined">communities</span>
      <span class="menu-text">Groups</span>
    </a>
    {% endif %}

    {% if room_settings.systems_tab %}
    <a class="navlink {% if request.resolver_match.url_name == 'system_list' %}active{% endif %}"
       href="{% url 'room_incharge:system_list' room_slug=room_slug %}">
      <span class="material-symbols-outlined">devices</span>
      <span class="menu-text">Systems</span>
    </a>
    {% endif %}

    {% if room_settings.categories_tab %}
    <a class="navlink {% if request.resolver_match.url_name == 'category_list' %}active{% endif %}"
       href="{% url 'room_incharge:category_list' room_slug=room_slug %}">
      <span class="material-symbols-outlined">category</span>
      <span class="menu-text">Categories</span>
    </a>
    {% endif %}

    {% if room_settings.brands_tab %}
    <a class="navlink {% if request.resolver_match.url_name == 'brand_list' %}active{% endif %}"
       href="{% url 'room_incharge:brand_list' room_slug=room_slug %}">
      <span class="material-symbols-outlined">branding_watermark</span>
      <span class="menu-text">Brands</span>
    </a>
    {% endif %}

    <div class="nav-divider"></div>

    <a class="navlink {% if request.resolver_match.url_name == 'issue_list' %}active{% endif %}"
       href="{% url 'room_incharge:issue_list' room_slug=room_slug %}">
      <span class="material-symbols-outlined">report</span>
      <span class="menu-text">Issues</span>
    </a>

    <a class="navlink {% if request.resolver_match.url_name == 'notifications' %}active{% endif %}"
       href="{% url 'room_incharge:notifications' room_slug=room_slug %}">
      <span class="material-symbols-outlined">notifications</span>
      <span class="menu-text">Notifications</span>
    </a>

    <div class="nav-divider"></div>

    <a class="navlink {% if request.resolver_match.url_name == 'room_settings' %}active{% endif %}"
       href="{% url 'room_incharge:room_settings' room_slug=room_slug %}">
      <span class="material-symbols-outlined">settings</span>
      <span class="menu-text">Settings</span>
    </a>

  </div>
</section>

<script>
  const toggle = document.getElementById('sidebarToggle');
  const sidebar = document.getElementById('mainSidebar');
  const overlay = document.getElementById('sidebarOverlay');
  toggle?.addEventListener('click', () => { sidebar.classList.toggle('open'); overlay.classList.toggle('open'); });
  overlay?.addEventListener('click', () => { sidebar.classList.remove('open'); overlay.classList.remove('open'); });
</script>