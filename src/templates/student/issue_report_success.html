{% extends "base.html" %}
{% load static %}

{% block title %} | Issue Reported Successfully{% endblock title %}

{% block style %}
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
    :root {
        --green-deep:   #0a5c3a;
        --green-mid:    #10915c;
        --green-bright: #1db87a;
        --green-glow:   #34e89e;
        --cream:        #f5f7f2;
        --text-dark:    #1a2b22;
        --text-muted:   #5a7265;
    }

    body {
        background: var(--cream);
        font-family: 'DM Sans', sans-serif;
        min-height: 100vh;
        overflow-x: hidden;
    }

    /* ── Animated mesh background ── */
    .bg-mesh {
        position: fixed;
        inset: 0;
        z-index: 0;
        background:
            radial-gradient(ellipse 80% 60% at 10% 20%,  rgba(16,145,92,0.12) 0%, transparent 60%),
            radial-gradient(ellipse 60% 80% at 90% 80%,  rgba(52,232,158,0.10) 0%, transparent 60%),
            radial-gradient(ellipse 50% 50% at 50% 50%,  rgba(245,247,242,1)   0%, transparent 100%);
        animation: meshShift 8s ease-in-out infinite alternate;
    }
    @keyframes meshShift {
        from { filter: hue-rotate(0deg);   }
        to   { filter: hue-rotate(15deg);  }
    }

    /* ── Floating orbs ── */
    .orb {
        position: fixed;
        border-radius: 50%;
        filter: blur(70px);
        opacity: 0.18;
        animation: float 6s ease-in-out infinite alternate;
        z-index: 0;
    }
    .orb-1 { width: 420px; height: 420px; background: var(--green-bright); top: -100px; right: -80px; animation-delay: 0s;   }
    .orb-2 { width: 280px; height: 280px; background: var(--green-glow);   bottom: 40px; left: -60px; animation-delay: 2s;  }
    @keyframes float {
        from { transform: translateY(0px) scale(1);    }
        to   { transform: translateY(30px) scale(1.05); }
    }

    /* ── Main card ── */
    .success-wrap {
        position: relative;
        z-index: 1;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 1rem;
    }

    .success-card {
        background: rgba(255,255,255,0.75);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(16,145,92,0.15);
        border-radius: 28px;
        padding: 3.5rem 3rem;
        max-width: 480px;
        width: 100%;
        text-align: center;
        box-shadow:
            0 4px 24px rgba(10,92,58,0.08),
            0 1px 3px  rgba(10,92,58,0.06),
            inset 0 1px 0 rgba(255,255,255,0.9);
        animation: cardIn 0.7s cubic-bezier(0.22, 1, 0.36, 1) both;
    }
    @keyframes cardIn {
        from { opacity: 0; transform: translateY(32px) scale(0.97); }
        to   { opacity: 1; transform: translateY(0)    scale(1);     }
    }

    /* ── Check icon ring ── */
    .icon-ring {
        width: 96px;
        height: 96px;
        margin: 0 auto 2rem;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--green-mid), var(--green-bright));
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow:
            0 0 0 12px rgba(29,184,122,0.12),
            0 0 0 24px rgba(29,184,122,0.06),
            0 8px 24px rgba(29,184,122,0.30);
        animation: ringPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both;
    }
    @keyframes ringPop {
        from { transform: scale(0); opacity: 0; }
        to   { transform: scale(1); opacity: 1; }
    }

    .icon-ring .material-symbols-outlined {
        font-size: 3rem;
        color: #fff;
        animation: checkDraw 0.4s ease 0.8s both;
    }
    @keyframes checkDraw {
        from { opacity: 0; transform: scale(0.5); }
        to   { opacity: 1; transform: scale(1);   }
    }

    /* ── Typography ── */
    .success-label {
        display: inline-block;
        font-size: 0.72rem;
        font-weight: 600;
        letter-spacing: 2.5px;
        text-transform: uppercase;
        color: var(--green-mid);
        background: rgba(16,145,92,0.1);
        border: 1px solid rgba(16,145,92,0.2);
        border-radius: 999px;
        padding: 4px 14px;
        margin-bottom: 1rem;
        animation: fadeUp 0.5s ease 0.5s both;
    }

    .success-title {
        font-family: 'DM Serif Display', serif;
        font-size: 2.1rem;
        color: var(--text-dark);
        line-height: 1.2;
        margin-bottom: 0.75rem;
        animation: fadeUp 0.5s ease 0.6s both;
    }

    .success-subtitle {
        color: var(--text-muted);
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.6;
        margin-bottom: 2rem;
        animation: fadeUp 0.5s ease 0.7s both;
    }

    @keyframes fadeUp {
        from { opacity: 0; transform: translateY(12px); }
        to   { opacity: 1; transform: translateY(0);    }
    }

    /* ── Divider ── */
    .divider {
        border: none;
        height: 1px;
        background: linear-gradient(to right, transparent, rgba(16,145,92,0.2), transparent);
        margin: 0 0 2rem;
        animation: fadeUp 0.5s ease 0.75s both;
    }

    /* ── Info pills ── */
    .info-pills {
        display: flex;
        gap: 0.75rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 2rem;
        animation: fadeUp 0.5s ease 0.8s both;
    }
    .info-pill {
        display: flex;
        align-items: center;
        gap: 6px;
        background: rgba(16,145,92,0.07);
        border: 1px solid rgba(16,145,92,0.15);
        border-radius: 999px;
        padding: 6px 14px;
        font-size: 0.82rem;
        color: var(--green-deep);
        font-weight: 500;
    }
    .info-pill .material-symbols-outlined {
        font-size: 1rem;
        color: var(--green-mid);
    }

    /* ── CTA Button ── */
    .btn-logout {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: linear-gradient(135deg, var(--green-deep), var(--green-mid));
        color: #fff;
        border: none;
        border-radius: 14px;
        padding: 14px 36px;
        font-family: 'DM Sans', sans-serif;
        font-size: 0.95rem;
        font-weight: 600;
        letter-spacing: 0.3px;
        text-decoration: none;
        box-shadow: 0 6px 20px rgba(10,92,58,0.28);
        transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
        animation: fadeUp 0.5s ease 0.9s both;
        cursor: pointer;
    }
    .btn-logout:hover {
        transform: translateY(-3px) scale(1.03);
        box-shadow: 0 12px 28px rgba(10,92,58,0.35);
        color: #fff;
    }
    .btn-logout:active {
        transform: translateY(0) scale(0.98);
    }
    .btn-logout .material-symbols-outlined {
        font-size: 1.1rem;
    }

    /* ── Confetti particles ── */
    .confetti-container {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 2;
        overflow: hidden;
    }
    .confetti-piece {
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 2px;
        opacity: 0;
        animation: confettiFall linear both;
    }
    @keyframes confettiFall {
        0%   { opacity: 1; transform: translateY(-20px) rotate(0deg);   }
        100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
    }
</style>

<!-- Google Material Symbols -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">
{% endblock style %}


{% block content %}

<!-- Background effects -->
<div class="bg-mesh"></div>
<div class="orb orb-1"></div>
<div class="orb orb-2"></div>

<!-- Confetti container (filled by JS) -->
<div class="confetti-container" id="confettiContainer"></div>

<div class="success-wrap">
    <div class="success-card">

        <!-- Animated check icon -->
        <div class="icon-ring">
            <span class="material-symbols-outlined">check</span>
        </div>

        <!-- Label -->
        <div class="success-label">Ticket Submitted</div>

        <!-- Title & subtitle -->
        <h1 class="success-title">Issue Reported!</h1>
        <p class="success-subtitle">
            Your issue has been logged and assigned to the room incharge.<br>
            You'll receive a confirmation on your college email.
        </p>

        <hr class="divider">

        <!-- Status pills -->
        <div class="info-pills">
            <span class="info-pill">
                <span class="material-symbols-outlined">schedule</span>
                TAT: 48 hours
            </span>
            <span class="info-pill">
                <span class="material-symbols-outlined">mail</span>
                Email sent
            </span>
            <span class="info-pill">
                <span class="material-symbols-outlined">notifications_active</span>
                Incharge notified
            </span>
        </div>

        <!-- Logout / Go Home button -->
        <a href="{% url 'core:logout' %}" class="btn-logout">
            <span class="material-symbols-outlined">logout</span>
            Done &amp; Logout
        </a>

    </div>
</div>

<script>
// Confetti burst on page load
(function () {
    const colors = ['#1db87a', '#34e89e', '#0a5c3a', '#a8f0d0', '#10915c', '#f5f7f2'];
    const container = document.getElementById('confettiContainer');
    const count = 60;

    for (let i = 0; i < count; i++) {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.style.cssText = `
            left: ${Math.random() * 100}%;
            top: ${-10 - Math.random() * 20}px;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            width: ${6 + Math.random() * 8}px;
            height: ${6 + Math.random() * 8}px;
            border-radius: ${Math.random() > 0.5 ? '50%' : '2px'};
            animation-duration: ${2 + Math.random() * 2.5}s;
            animation-delay: ${Math.random() * 1.2}s;
        `;
        container.appendChild(piece);
    }

    // Remove confetti from DOM after animation
    setTimeout(() => container.remove(), 5000);
})();
</script>

{% endblock content %}